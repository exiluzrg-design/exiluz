<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Entrega - Exiluz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- estilos globales -->
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- Banner + Header igual que en el resto del sitio -->
  <link rel="stylesheet" href="assets/css/header-banner.css" />
  <script src="assets/js/header-banner.js" defer></script>

  <!-- Ajustes visuales SOLO para esta p치gina -->
  <style>
    .page--checkout .checkout-steps {
      display: flex;
      align-items: center;
      gap: 24px;
      font-size: 14px;
      margin-bottom: 24px;
      color: #9da5b4;
    }
    .page--checkout .checkout-steps .step {
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .page--checkout .checkout-steps .step::before {
      content: "";
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid #3b82f6;
      background: transparent;
      box-sizing: border-box;
    }
    .page--checkout .checkout-steps .step--done::before {
      background: #3b82f6;
    }
    .page--checkout .checkout-steps .step--current {
      color: #ffffff;
      font-weight: 600;
    }

    .page--checkout .checkout-form-inner {
      max-width: 480px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .page--checkout .form-label {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 14px;
    }
    .page--checkout .form-label input {
      padding: 10px 12px;
      border-radius: 4px;
      border: 1px solid #333a45;
      background: #050608;
      color: #f5f5f5;
      outline: none;
    }
    .page--checkout .form-label input::placeholder {
      color: #6b7280;
    }
    .page--checkout .form-label input:focus {
      border-color: #3b82f6;
    }

    .page--checkout .checkout-form h2 {
      margin: 16px 0 8px;
      font-size: 18px;
    }

    .page--checkout .btn-full {
      margin-top: 8px;
    }

    .page--checkout .checkout-message {
      margin-top: 8px;
      font-size: 13px;
      color: #f97373;
    }

    /* un poco de respiro abajo en mobile */
    @media (max-width: 768px) {
      .page--checkout .cart-layout {
        flex-direction: column;
        gap: 24px;
      }
    }
  </style>
</head>

<body class="page--checkout">

  <!-- HEADER + BANNER -->
  <div id="header-root"></div>

  <main class="cart-main container">

    <!-- Barra de pasos -->
    <div class="checkout-steps">
      <span class="step step--done">Carrito</span>
      <span class="step step--current">Entrega</span>
      <span class="step step--pending">Pago</span>
    </div>

    <h1 class="cart-title">Entrega</h1>

    <div class="cart-layout">

      <!-- 游닏 DATOS DE CONTACTO + ENTREGA (CP) -->
      <section class="checkout-form">

        <h2>Datos de contacto</h2>
        <p style="font-size:13px; color:#9da5b4; margin-bottom:12px;">
          Usamos tu e-mail para enviarte el comprobante de compra.
        </p>

        <form id="checkout-contact-form" class="checkout-form-inner">

          <label class="form-label">
            E-mail
            <input
              type="email"
              name="email"
              required
              placeholder="tuemail@ejemplo.com" />
          </label>

          <h2>Entrega</h2>

          <label class="form-label">
            C칩digo Postal
            <input
              type="text"
              name="cp"
              required
              placeholder="Ej: 9420" />
          </label>

          <button type="submit" class="btn btn-primary btn-full">
            Continuar
          </button>

          <p id="checkout-contact-message" class="checkout-message"></p>
        </form>
      </section>

      <!-- 游 RESUMEN (igual estructura que carrito) -->
      <aside class="cart-summary">
        <h2>Tu pedido</h2>

        <div class="summary-row">
          <span>Producto:</span>
          <span id="summary-product-name">Llavero Elijo Creer 칑 1</span>
        </div>

        <div class="summary-row">
          <span>Subtotal:</span>
          <span id="summary-subtotal">$18.000</span>
        </div>

        <div class="summary-row">
          <span>Env칤o:</span>
          <span>Gratis</span>
        </div>

        <div class="summary-total">
          <span>Total:</span>
          <span id="summary-total">$18.000</span>
        </div>

        <p class="summary-note">
          Los detalles de env칤o y pago se confirman en el siguiente paso.
        </p>
      </aside>

    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <small>춸 <span id="year"></span> Exiluz. Todos los derechos reservados.</small>
    </div>
  </footer>

  <script>
    // Paso 1: guardar Email + CP y pasar a la pantalla de env칤o
    document.getElementById('checkout-contact-form')?.addEventListener('submit', function (e) {
      e.preventDefault();

      const form = e.target;
      const email = form.email.value.trim();
      const cp = form.cp.value.trim();

      if (!email || !cp) {
        document.getElementById('checkout-contact-message').textContent =
          'Complet치 el e-mail y el c칩digo postal para continuar.';
        return;
      }

      // Guardamos temporalmente en localStorage para usar en la pr칩xima pantalla
      try {
        localStorage.setItem('exiluz_checkout_email', email);
        localStorage.setItem('exiluz_checkout_cp', cp);
      } catch (err) {
        console.warn('No se pudo usar localStorage', err);
      }

      // 游녤 Ahora vamos al PASO 2 (env칤o + bot칩n "Continuar para el pago")
      window.location.href = 'envio.html';
    });
  </script>
</body>
</html>
