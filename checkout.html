<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Entrega - Exiluz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- estilos globales -->
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- Banner + Header igual que en el resto del sitio -->
  <link rel="stylesheet" href="assets/css/header-banner.css" />
  <script src="assets/js/header-banner.js" defer></script>
</head>

<body class="page--checkout">

  <!-- HEADER + BANNER -->
  <div id="header-root"></div>

  <main class="cart-main container">

    <!-- Barra de pasos -->
    <div class="checkout-steps">
      <span class="step step--done">Carrito</span>
      <span class="step step--current">Entrega</span>
      <span class="step step--pending">Pago</span>
    </div>

    <h1 class="cart-title">Entrega</h1>

    <div class="cart-layout">

      <!-- 游닏 DATOS DE CONTACTO + ENTREGa (CP) -->
      <section class="checkout-form">

        <h2>Datos de contacto</h2>

        <form id="checkout-contact-form" class="checkout-form-inner">

          <label class="form-label">
            E-mail
            <input
              type="email"
              name="email"
              required
              placeholder="tuemail@ejemplo.com"
              class="form-input"/>
          </label>

          <label class="form-checkbox">
            <input type="checkbox" name="newsletter" />
            <span>Quiero recibir ofertas y novedades por e-mail</span>
          </label>

          <h2>Entrega</h2>

          <label class="form-label">
            C칩digo Postal
            <input
              type="text"
              name="cp"
              required
              placeholder="Ej: 9420"
              class="form-input"/>
          </label>

          <button type="submit" class="btn btn-primary btn-full">
            Continuar
          </button>

          <p id="checkout-contact-message" class="checkout-message"></p>
        </form>
      </section>

      <!-- 游 RESUMEN (igual estructura que carrito) -->
      <aside class="cart-summary">
        <h2>Tu pedido</h2>

        <div class="summary-row">
          <span>Producto:</span>
          <span id="summary-product-name">Llavero Elijo Creer 칑 1</span>
        </div>

        <div class="summary-row">
          <span>Subtotal:</span>
          <span id="summary-subtotal">$18.000</span>
        </div>

        <div class="summary-row">
          <span>Env칤o:</span>
          <span>Gratis</span>
        </div>

        <div class="summary-total">
          <span>Total:</span>
          <span id="summary-total">$18.000</span>
        </div>

        <p class="summary-note">
          Los detalles de env칤o y pago se confirman en el siguiente paso.
        </p>
      </aside>

    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <small>춸 <span id="year"></span> Exiluz. Todos los derechos reservados.</small>
    </div>
  </footer>

  <script>
    // Paso 1: guardar Email + CP y pasar a la pantalla de env칤o
    document.getElementById('checkout-contact-form')?.addEventListener('submit', function (e) {
      e.preventDefault();

      const form = e.target;
      const email = form.email.value.trim();
      const cp = form.cp.value.trim();
      const newsletter = form.newsletter.checked;

      if (!email || !cp) {
        document.getElementById('checkout-contact-message').textContent =
          'Complet치 el e-mail y el c칩digo postal para continuar.';
        return;
      }

      // Guardamos temporalmente en localStorage para usar en la pr칩xima pantalla
      try {
        localStorage.setItem('exiluz_checkout_email', email);
        localStorage.setItem('exiluz_checkout_cp', cp);
        localStorage.setItem('exiluz_checkout_newsletter', newsletter ? '1' : '0');
      } catch (err) {
        console.warn('No se pudo usar localStorage', err);
      }

      // 游녤 Ahora vamos al PASO 2 (envio + bot칩n "Continuar para el pago")
      window.location.href = 'envio.html';
    });
  </script>
</body>
</html>
